---
title: Android项目产品源码集成
date: 2018-10-19 10:30:58
tags: [产品,源码]
categories: 黄涛
description: 产品源码集成指南
---
## Android项目中产品源码集成

### 源码文件操作说明

1. 将产品源码EMP放入工程根目录
1. 将EMP目录libs中所有的文件从工程里面删除（去除引入jar包及so库文件冲突）
1. 将项目工程中emp_out.jar包文件删除（该文件是产品源码jar包）

### 源码文件依赖操作

1. 在工程settings.gradle文件中添加到include ':EMP'
1. 在项目bankcib工程中build.gradle文件中添加compile project(':EMP')

完成以上两步后，点击AS工具提示的Sync Now之后，项目依赖源码工程操作完成。

### 项目中代码冲突处理

冲突主要有以下三类：

1.
![](http://bmob-cdn-20523.b0.upaiyun.com/2018/10/19/5d12d55a407eadce80dc42128242305d.png)

项目中调用的混淆方法需要改成混淆前方法名即可。

2.![](http://bmob-cdn-20523.b0.upaiyun.com/2018/10/19/7aeaa607404ac44e8074addb8a847490.png)

类的私有变量引用权限问题，改成对应混淆前的方法获取即可。

3.整个文件混淆前后替换（比如兴业项目处理离线各种问题的XYOffline.java文件）


### 总结
虽然整个流程看上去就以上三个大的过程，但实际情况是每次集成产品源码耗时几乎都是30m+,考虑到这个问题，也可以集成一份源码后当做基准，每次代码更新都对应的copy及处理到这份基准上（相关操作需要用代码比对工具及细心的操作），就不用每次都耗时来集成源码。